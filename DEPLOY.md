# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –±–æ—Ç–∞

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-–¥–µ–ø–ª–æ—è)
2. [Systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)](#–≤–∞—Ä–∏–∞–Ω—Ç-1-systemd-—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. [Docker](#–≤–∞—Ä–∏–∞–Ω—Ç-2-docker)
4. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–±–æ—Ç–∞)
5. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏)
6. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: Systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç Linux —Å–µ—Ä–≤–µ—Ä
- ‚ö†Ô∏è –ù—É–∂–Ω—ã –ø—Ä–∞–≤–∞ root/sudo

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –õ–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –û–° —Å Docker

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

---

## –í–∞—Ä–∏–∞–Ω—Ç 1: Systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Linux —Å–µ—Ä–≤–µ—Ä (Ubuntu/Debian/CentOS)
- Python 3.10+
- –ü—Ä–∞–≤–∞ root –∏–ª–∏ sudo

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y python3 python3-venv python3-pip git
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt
sudo git clone <–≤–∞—à_repo_url> taxi-zhukovo
cd taxi-zhukovo
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ SCP/SFTP**

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
scp -r /Volumes/PortableSSD/TAXI_–ñ–£–ö–û–í–û user@server:/opt/taxi-zhukovo
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤**

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
tar -czf taxi-bot.tar.gz --exclude='venv' --exclude='__pycache__' --exclude='*.db' .

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
scp taxi-bot.tar.gz user@server:/tmp/
ssh user@server
cd /opt
sudo tar -xzf /tmp/taxi-bot.tar.gz -C taxi-zhukovo
```

### –®–∞–≥ 3: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/taxi-zhukovo

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è
sudo chmod +x deploy/deploy.sh
sudo ./deploy/deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `taxi`
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç systemd service
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
sudo nano /opt/taxi-zhukovo/.env
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
ADMIN_TELEGRAM_IDS=123456789
DATABASE_URL=sqlite:///./taxi_zhukovo.db
LOG_LEVEL=INFO
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl start taxi-bot

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
sudo systemctl enable taxi-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status taxi-bot
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º

```bash
# –ó–∞–ø—É—Å–∫
sudo systemctl start taxi-bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop taxi-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart taxi-bot

# –°—Ç–∞—Ç—É—Å
sudo systemctl status taxi-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u taxi-bot -f
```

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: Docker

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ú–∏–Ω–∏–º—É–º 512MB RAM

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo apt install -y docker-compose

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER
newgrp docker
```

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
cd /opt
git clone <–≤–∞—à_repo_url> taxi-zhukovo
cd taxi-zhukovo
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.example .env
nano .env
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
cd deploy
docker-compose up -d
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –õ–æ–≥–∏
docker-compose logs -f

# –°—Ç–∞—Ç—É—Å
docker-compose ps
```

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

### Systemd –≤–∞—Ä–∏–∞–Ω—Ç

#### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/taxi-zhukovo
sudo chmod +x deploy/update.sh
sudo ./deploy/update.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥ (–∏–∑ git –∏–ª–∏ –∞—Ä—Ö–∏–≤–∞)
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞

#### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Git

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
sudo systemctl stop taxi-bot

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î
sudo cp /opt/taxi-zhukovo/taxi_zhukovo.db /opt/taxi-zhukovo/backups/taxi_zhukovo_$(date +%Y%m%d_%H%M%S).db

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd /opt/taxi-zhukovo
sudo -u taxi git pull origin main

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo -u taxi /opt/taxi-zhukovo/venv/bin/pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl start taxi-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status taxi-bot
```

#### –°–ø–æ—Å–æ–± 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ: —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
tar -czf update_files.tar.gz --exclude='venv' --exclude='__pycache__' --exclude='*.db' --exclude='.env' .

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp update_files.tar.gz user@server:/tmp/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo systemctl stop taxi-bot
sudo cp /opt/taxi-zhukovo/taxi_zhukovo.db /opt/taxi-zhukovo/backups/
sudo tar -xzf /tmp/update_files.tar.gz -C /opt/taxi-zhukovo --exclude='.env' --exclude='*.db'
sudo -u taxi /opt/taxi-zhukovo/venv/bin/pip install -r /opt/taxi-zhukovo/requirements.txt
sudo systemctl start taxi-bot
```

### Docker –≤–∞—Ä–∏–∞–Ω—Ç

```bash
cd /opt/taxi-zhukovo/deploy
sudo chmod +x update-docker.sh
sudo ./update-docker.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (–µ—Å–ª–∏ —á–µ—Ä–µ–∑ git)
cd /opt/taxi-zhukovo
git pull origin main

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
cd deploy
docker-compose build --no-cache

# –ó–∞–ø—É—Å–∫
docker-compose up -d
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### Systemd

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u taxi-bot -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
sudo journalctl -u taxi-bot -n 100

# –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
sudo journalctl -u taxi-bot --since today

# –õ–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏
sudo journalctl -u taxi-bot -p err

# –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
tail -f /opt/taxi-zhukovo/logs/bot.log
```

### Docker

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs taxi-bot
```

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u taxi-bot -n 50
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª:**
   ```bash
   sudo cat /opt/taxi-zhukovo/.env
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   sudo chown -R taxi:taxi /opt/taxi-zhukovo
   ```

### –ë–æ—Ç –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π Conflict

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ. –†–µ—à–µ–Ω–∏–µ:

1. –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:
   ```bash
   ps aux | grep run.py
   ```

2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:
   ```bash
   sudo pkill -f run.py
   ```

3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   sudo systemctl restart taxi-bot
   ```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
sudo systemctl stop taxi-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
sudo lsof /opt/taxi-zhukovo/taxi_zhukovo.db

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo pkill -f run.py

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo cp /opt/taxi-zhukovo/backups/taxi_zhukovo_YYYYMMDD_HHMMSS.db /opt/taxi-zhukovo/taxi_zhukovo.db
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo systemctl stop taxi-bot
cd /opt/taxi-zhukovo
sudo rm -rf venv
sudo -u taxi python3 -m venv venv
sudo -u taxi venv/bin/pip install --upgrade pip
sudo -u taxi venv/bin/pip install -r requirements.txt
sudo systemctl start taxi-bot
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –±–æ—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
#!/bin/bash
# /opt/taxi-zhukovo/deploy/health-check.sh

if ! systemctl is-active --quiet taxi-bot; then
    echo "–ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω! –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫..."
    systemctl restart taxi-bot
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
fi
```

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:

```bash
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
*/5 * * * * /opt/taxi-zhukovo/deploy/health-check.sh
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–û–≥–Ω–µ–Ω–Ω–∞—è —Å—Ç–µ–Ω–∞:**
   ```bash
   sudo ufw allow 22/tcp  # SSH
   sudo ufw enable
   ```

2. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:**
   ```bash
   # –î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤
   0 2 * * * cp /opt/taxi-zhukovo/taxi_zhukovo.db /opt/taxi-zhukovo/backups/taxi_zhukovo_$(date +\%Y\%m\%d).db
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞:**
   ```bash
   df -h
   ```

---

## –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥

### Systemd

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|----------|---------|
| –ó–∞–ø—É—Å–∫ | `sudo systemctl start taxi-bot` |
| –û—Å—Ç–∞–Ω–æ–≤–∫–∞ | `sudo systemctl stop taxi-bot` |
| –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ | `sudo systemctl restart taxi-bot` |
| –°—Ç–∞—Ç—É—Å | `sudo systemctl status taxi-bot` |
| –õ–æ–≥–∏ | `sudo journalctl -u taxi-bot -f` |
| –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ | `sudo systemctl enable taxi-bot` |

### Docker

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|----------|---------|
| –ó–∞–ø—É—Å–∫ | `docker-compose up -d` |
| –û—Å—Ç–∞–Ω–æ–≤–∫–∞ | `docker-compose down` |
| –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ | `docker-compose restart` |
| –õ–æ–≥–∏ | `docker-compose logs -f` |
| –°—Ç–∞—Ç—É—Å | `docker-compose ps` |

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

**–£–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üöÄ**

