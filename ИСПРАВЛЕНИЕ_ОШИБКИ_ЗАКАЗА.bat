@echo off
chcp 65001 > nul
cls
echo ╔════════════════════════════════════════════════════════════════════╗
echo ║     ИСПРАВЛЕНИЕ ОШИБКИ СОЗДАНИЯ ЗАКАЗА                             ║
echo ╚════════════════════════════════════════════════════════════════════╝
echo.
echo Эта программа добавит недостающие поля в базу данных.
echo.
pause
echo.
echo [1/2] Применение миграции базы данных...
python apply_migration.py
if errorlevel 1 (
    echo.
    echo ❌ Произошла ошибка при применении миграции!
    pause
    exit /b 1
)
echo.
echo ✅ Миграция применена успешно!
echo.
echo [2/2] Запуск диагностики...
python diagnose.py
if errorlevel 1 (
    echo.
    echo ❌ Диагностика выявила проблемы!
    pause
    exit /b 1
)
echo.
echo ════════════════════════════════════════════════════════════════════
echo  ✅ ВСЕ ИСПРАВЛЕНО! Теперь можно запускать бота.
echo ════════════════════════════════════════════════════════════════════
echo.
pause

