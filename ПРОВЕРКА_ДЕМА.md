# üìç –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫—Ç–æ –æ—Ç–º–µ—Ç–∏–ª—Å—è –≤ –∑–æ–Ω–µ DEMA –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

–í Telegram –±–æ—Ç–µ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–∞–ø–∏—à–∏—Ç–µ:

```
/check_dema
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–º–µ—Ç–∏–ª–∏—Å—å –≤ –∑–æ–Ω–µ DEMA.

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh –≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/TAXI_–ñ–£–ö–û–í–û

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
python3 check_dema_drivers.py
```

### –ß—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Å–∫—Ä–∏–ø—Ç:

- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π —Å `current_zone = DEMA`
- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –≤–æ–¥–∏—Ç–µ–ª—è (–æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω)
- –í—Ä–µ–º—è –∫–æ–≥–¥–∞ –≤–æ–¥–∏—Ç–µ–ª—å –≤—ã—à–µ–ª –Ω–∞ –ª–∏–Ω–∏—é
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ –∑–æ–Ω–µ

---

## –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä—è–º–æ–π SQL –∑–∞–ø—Ä–æ—Å (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ SQL:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/TAXI_–ñ–£–ö–û–í–û

# –ó–∞–ø—É—Å—Ç–∏—Ç—å SQL –∑–∞–ø—Ä–æ—Å
sqlite3 taxi_zhukovo.db "
SELECT 
    d.id,
    u.full_name,
    u.telegram_id,
    d.status,
    d.current_zone,
    d.online_since,
    d.car_model,
    d.car_number
FROM drivers d
JOIN users u ON d.user_id = u.id
WHERE d.current_zone = 'DEMA'
ORDER BY d.online_since;
"
```

---

## –í–∞—Ä–∏–∞–Ω—Ç 4: –ß–µ—Ä–µ–∑ Python –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/TAXI_–ñ–£–ö–û–í–û
python3

# –í Python:
from database.db import SessionLocal
from bot.models.driver import Driver, DriverZone, DriverStatus

db = SessionLocal()
dema_drivers = db.query(Driver).filter(Driver.current_zone == DriverZone.DEMA).all()

print(f"–í–æ–¥–∏—Ç–µ–ª–µ–π –≤ DEMA: {len(dema_drivers)}")
for d in dema_drivers:
    print(f"ID {d.id}: {d.user.full_name if d.user else 'N/A'} - {d.status}")
    
db.close()
```

---

## üìã –ß—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞:

1. **–í—Å–µ –≤–æ–¥–∏—Ç–µ–ª–∏ –≤ –∑–æ–Ω–µ DEMA** (–≤–∫–ª—é—á–∞—è –æ—Ñ—Ñ–ª–∞–π–Ω)
2. **–û–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª–∏** –≤ –∑–æ–Ω–µ DEMA
3. **–í—Ä–µ–º—è –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ª–∏–Ω–∏—é** (online_since)
4. **–°—Ç–∞—Ç—É—Å** (online/offline/busy)
5. **–ê–≤—Ç–æ–º–æ–±–∏–ª—å** (–º–æ–¥–µ–ª—å –∏ –Ω–æ–º–µ—Ä)

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –¢–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª–∏ –≤ DEMA:

```bash
python3 -c "
from database.db import SessionLocal
from bot.models.driver import Driver, DriverZone, DriverStatus

db = SessionLocal()
online_dema = db.query(Driver).filter(
    Driver.current_zone == DriverZone.DEMA,
    Driver.status == DriverStatus.ONLINE
).all()

print(f'–û–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ DEMA: {len(online_dema)}')
for d in online_dema:
    print(f'  - {d.user.full_name if d.user else \"N/A\"} (ID: {d.id})')
    
db.close()
"
```

### –í–æ–¥–∏—Ç–µ–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ DEMA:

```bash
python3 -c "
from database.db import SessionLocal
from bot.services.queue_manager import queue_manager

db = SessionLocal()
queue_manager.rebuild_from_db(db)

dema_queue = queue_manager.get_queue_info('DEMA')
print(f'–í–æ–¥–∏—Ç–µ–ª–µ–π –≤ –æ—á–µ—Ä–µ–¥–∏ DEMA: {dema_queue[\"count\"]}')
print(f'ID –≤–æ–¥–∏—Ç–µ–ª–µ–π: {dema_queue[\"drivers\"]}')

db.close()
"
```

---

## ‚ö° –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±

–ü—Ä–æ—Å—Ç–æ –≤ Telegram –±–æ—Ç–µ –Ω–∞–ø–∏—à–∏—Ç–µ: **`/check_dema`**

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ –∑–æ–Ω–µ DEMA —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.




